<script>	
	// Get the url params
	const urlParams = new URLSearchParams(window.location.search);
	var id = urlParams.get('id');
	
	if (id != "")
	{
		var httpRequest = new XMLHttpRequest();
		httpRequest.open('POST', "https://murmuring-forest-35635.herokuapp.com/https://rule34.xxx/index.php?page=post&s=view&id=" + id, true);
		httpRequest.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
		httpRequest.onreadystatechange = function () {
			if (this.readyState == 4)
			{
				// Get the response text
				var responseText = httpRequest.responseText;
				
				var parser = new DOMParser();
				var element = parser.parseFromString(responseText, 'text/html');
				//element.innerHTML = responseText;
				var linkList = element.getElementsByClassName("link-list")[0];
				var ul = linkList.getElementsByTagName("UL")[0];
				var lis = ul.getElementsByTagName("LI");
				var li = null;
				for (i = 0; i < lis.length; i++)
				{
					if (lis[i].innerHTML.includes("Original"))
					{
						li = lis[i];
						break;
					}
				}
				var a = li.getElementsByTagName("a")[0];
				var href = a.href;
				//href = href.substring(0, href.indexOf('?')); // Remove any url params cuz things get weird
				window.location.href = href;
			}
		}
		httpRequest.send();
	}

</script>